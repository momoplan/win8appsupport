(function(){var g=window.Root;var l=sessionStorage.getItem("userno");var k=sessionStorage.getItem("userName");function s(){if(sessionStorage.getItem("sessionid")){i()}else{e("showLog").addEventListener("click",p,false);e("showReg").addEventListener("click",n,false)}e("balance").addEventListener("click",b,false)}function p(){e("logBtn").click();window.frash=true}function n(){e("logBtn").click();e("reguestBtn").click()}function i(){var v={command:"updateUserInfo",type:"userCenter",userno:l,phonenum:k};g.getData(v,"showUserInfo")}function b(){var v={command:"AllQuery",type:"balance",userno:l,phonenum:k};g.getData(v,"setbalance")}function o(z){var A=z;var v=(A.nickName)?A.nickName+'&nbsp;<a id="nick" href="javascript:">修改</a>':'<a id="nick" href="javascript:">设置</a>';var w=(A.certId)?A.certId:'<a id="cerId" href="javascript:">设置</a>';var x=(A.mobileId)?A.mobileId:'<a id="mobileId" href="javascript:">绑定</a>';var y='<div class="detTitle">用户资料</div>                            <div class="infoCont">                                <ul>                                    <li>用户名：'+A.userName+"</li>                                    <li>昵称："+v+"</li>                                    <li>身份证号："+w+"</li>                                    <li>手机号："+x+"</li>                                    <li>余额："+A.bet_balance+"</li>                                    <li>积分："+A.score+'</li>                                </ul>                            </div>                            <div class="uc_log">                                <p id="myMessage">我的留言</p>                                <p id="rePwd">密码修改</p>                            </div>';e("userInfo").innerHTML=y;e("nick").addEventListener("click",j,false);e("rePwd").addEventListener("click",f,false);if(A.certId==""){e("cerId").addEventListener("click",h,false)}if(A.mobileId==""){e("mobileId").addEventListener("click",u,false)}}function j(){var v='<div class="dialogDetail">        <div class="logTit">            <div class="titLeft">                <a onClick="closeDialog()" class="diaBtn" style="display:none;" href="javascript:;">返回</a>            </div>            <div class="titRight"></div>            <div class="titMidd">昵称设置</div>        </div>        <div class="logCont">            <div class="logInputs" style="width:auto; padding:20px 40px 0 40px;">            <div class="setNick"><p>请输入昵称：</p><input id="setNick" type="text" /></div>			       <div id="nickNotice"></div>                <div class="clear h18"></div>                <div class="uc_sub">                <div class="subBtm">                    <a id="quit" href="javascript:;">取消</a>                </div>                <div class="subBtm fr">                    <a id="submit" href="javascript:;">确定</a>                </div>				   </div>                <div class="clear h25"></div>            </div>        </div>    </div>';var w={width:395,height:250,isMask:true};g.dialog(v,w);e("quit").addEventListener("click",closeDialog,false);e("submit").addEventListener("click",a,false)}function h(){var v='<div class="dialogDetail">        <div class="logTit">            <div class="titLeft">                <a onClick="closeDialog()" class="diaBtn" style="display:none;" href="#">返回</a>            </div>            <div class="titRight"></div>            <div class="titMidd">身份证号绑定</div>        </div>        <div class="logCont">            <div class="logInputs" style="width:auto; padding:20px 40px 0 40px;">            <div class="setNick"><p>请输入身份验证信息：</p>					<ul><li>身份证号：<input id="certid" type="text" /></li><li>真实姓名：<input id="trueName" type="text" /></li></ul></div>			       <div id="nickNotice"></div>                <div class="clear h18"></div>                <div class="uc_sub">                <div class="subBtm">                    <a id="quit" href="javascript:;">取消</a>                </div>                <div class="subBtm fr">                    <a id="submit" href="javascript:;">确定</a>                </div>				   </div>                <div class="clear h25"></div>            </div>        </div>    </div>';var w={width:395,height:250,isMask:true};g.dialog(v,w);e("quit").addEventListener("click",closeDialog,false);e("submit").addEventListener("click",t,false)}function u(){var v='<div class="dialogDetail">        <div class="logTit">            <div class="titLeft">                <a onClick="closeDialog()" class="diaBtn" style="display:none;" href="#">返回</a>            </div>            <div class="titRight"></div>            <div class="titMidd">身份证号绑定</div>        </div>        <div class="logCont">            <div class="logInputs" style="width:auto; padding:20px 40px 0 40px;">            <div class="setNick"><p>请输入身份验证信息：</p>					<ul><li>手机号码：<input id="phonenum" type="text" /></li><li>验证码：<input id="serId" type="text" /></li></ul></div>			       <div id="nickNotice"></div>                <div class="clear h18"></div>                <div class="uc_sub">                <div class="subBtm">                    <a id="quit" href="javascript:;">取消</a>                </div>                <div class="subBtm fr">                    <a id="submit" href="javascript:;">确定</a>                </div>				   </div>                <div class="clear h25"></div>            </div>        </div>    </div>';var w={width:395,height:250,isMask:true};g.dialog(v,w);e("quit").addEventListener("click",closeDialog,false);e("submit").addEventListener("click",q,false)}function f(){var v='<div class="dialogDetail">        <div class="logTit">            <div class="titLeft">                <a onClick="closeDialog()" class="diaBtn" style="display:none;" href="#">返回</a>            </div>            <div class="titRight"></div>            <div class="titMidd">修改密码</div>        </div>        <div class="logCont">            <div class="logInputs" style="width:auto; padding:20px 40px 0 40px;">            <div class="setNick"><p>请输入身份验证信息：</p>					<ul><li>历史密码：<input id="oldpwd" type="password" /></li><li>新密码：<input id="password" type="password" /></li><li>确认密码：<input id="repassword" type="password" /></li></ul></div>			       <div id="nickNotice"></div>                <div class="clear h18"></div>                <div class="uc_sub">                <div class="subBtm">                    <a id="quit" href="javascript:;">取消</a>                </div>                <div class="subBtm fr">                    <a id="submit" href="javascript:;">确定</a>                </div>				   </div>                <div class="clear h25"></div>            </div>        </div>    </div>';var w={width:395,height:250,isMask:true};g.dialog(v,w);e("quit").addEventListener("click",closeDialog,false);e("submit").addEventListener("click",d,false)}function d(){var v=e("oldpwd").value;var y=e("password").value;var x=e("repassword").value;if(y.length<6){e("nickNotice").style.display="block";e("nickNotice").innerHTML="密码不得低于6位";return}if(y!=x){e("nickNotice").style.display="block";e("nickNotice").innerHTML="确认密码与新密码不一致";return}var w={command:"updatePass",userno:l,old_pass:v,new_pass:y};g.getData(w,"repwd")}function r(v){if(v.error_code=="0000"){e("quit").click()}else{e("nickNotice").style.display="block";e("nickNotice").innerHTML=v.message}}window.repwd=r;function a(){var v=e("setNick").value;if(v==""){e("nickNotice").style.display="block";e("nickNotice").innerHTML="请填写您的昵称";return}var x=/^[a-z\d_\u4e00-\u9fa5]{3,12}/i;if(!x.test(v)){e("nickNotice").style.display="block";e("nickNotice").innerHTML="请输入数字、英文字母或者汉字";return}var w={command:"updateUserInfo",type:"updateNickName",phonenum:k,userno:l,nickName:v};g.getData(w,"getNickBack");e("quit").click()}function t(){var A=e("certid").value;var v=e("trueName").value;var y=/[^\u4e00-\u9fa5]/;var z=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/;var x=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{4}$/;if(y.test(v)){e("nickNotice").style.display="block";e("nickNotice").innerHTML="真实姓名错误";return}if(!z.test(A)&&!x.test(A)){e("nickNotice").style.display="block";e("nickNotice").innerHTML="请输入正确的身份号";return}var w={command:"updateUserInfo",phonenum:k,userno:l,name:v,certid:A};g.getData(w,"getNickBack");e("quit").click()}function q(){var y=e("phonenum").value;var x=e("serId").value;var w=/^1[3|4|5|8][0-9]\d{4,8}$/;if(!w.test(y)){e("nickNotice").style.display="block";e("nickNotice").innerHTML="请输入正确的手机号码";return}var v={command:"updateUserInfo",type:"bindPhone",phonenum:k,userno:l,bindPhoneNum:y,securityCode:"465155"};var z={command:"updateUserInfo",type:"bindPhoneSecurityCode",phonenum:k,userno:l,bindPhoneNum:y};console.log(v);g.getData(z,"getNickBack");g.getData(v,"getNickBack");e("quit").click()}function c(v){window.location.reload();console.log(v)}function m(x){var y=x;console.log(y);var v='<div class="dialogDetail">        <div class="logTit">            <div class="titLeft">                <a onClick="closeDialog()" class="diaBtn" href="#">返回</a>            </div>            <div class="titRight"></div>            <div class="titMidd">资金详细</div>        </div>        <div class="logCont">            <div class="balance" style="width:auto; padding:20px 40px 0 40px;">					<ul>						<li class="bn"><p class="banLeft">总金额</p><p class="banRight">'+y.balance+'</p></li>						<li class="bn"><p class="banLeft">冻结金额</p><p class="banRight">'+y.freezebalance+'</p></li>						<li class="bn"><p class="banLeft">可投注金额</p><p class="banRight">'+y.bet_balance+'</p></li>						<li class="bn"><p class="banLeft">可提现金额</p><p class="banRight">'+y.drawbalance+"</p></li>					</ul>            </div>        </div>    </div>";var w={width:395,height:250,isMask:true};g.dialog(v,w)}window.setbalance=m;window.getNickBack=c;window.showUserInfo=o;function e(v){return document.getElementById(v)}s()})();