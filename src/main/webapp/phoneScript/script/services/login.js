(function(){var b=window.Root;var k=window.util;if(sessionStorage.getItem("sessionid")){g("logBtn").style.display="none"}function o(){g("logBtn").addEventListener("click",j,false);var q=document.getElementsByTagName("body")[0];var r=k.getElementsByClassName("onoff",q);for(var s=0;s<r.length;s++){r[s].addEventListener("click",h,false)}}o();function p(){var q=document.getElementsByTagName("body")[0];var r=k.getElementsByClassName("onoff",q);for(var s=0;s<r.length;s++){r[s].addEventListener("click",h,false)}}function j(){var r='    <div class="dialogDetail">        <div class="logTit">            <div class="titLeft">                <a onClick="closeDialog()" class="diaBtn" href="#">返回</a>            </div>            <div class="titRight"><a id="reguestBtn" class="diaBtn" href="#">注册</a></div>            <div class="titMidd">                </div>                            </div>                        <div class="logCont">                <div class="logInputs">                    <div class="logTop">                        <ul>                            <li>                                <img src="images/icon/userName.png" />                                <input id="userLogName" type="text" value="邮箱/用户名/手机号" />                            </li>                            <li>                                <img src="images/icon/userPwd.png" />                                <input id="userPwd" type="password" />                            </li>                        </ul>                            </div>                    <div class="autoLog">                        <span class="logtext">自动登录</span>                        <div class="closeBtn" id="">                            <span class="onoff"><label><i></i></label></span>                        </div>                    </div>                <div id="errInfo" class="logerrInfo"></div>                    <div class="clear"></div>                    <div class="subBtm">                        <a id="loginSub" href="#">登录</a>                    </div>                    <div class="regNew">                        <p class="fl"><a id="forgetPwd" href="#"><img src="images/icon/forgetIcon.png" />忘记密码</a></p>                        <p class="fr"><a id="addNewUser" href="#"><img src="images/icon/reguestIcon.png" />注册新用户</a></p>                    </div>                    <div class="h50"></div>                </div>            </div>        </div>';var q={width:545,height:384,isMask:true};b.dialog(r,q);p();g("forgetPwd").addEventListener("click",a,false);g("addNewUser").addEventListener("click",c,false);g("reguestBtn").addEventListener("click",c,false);g("userLogName").addEventListener("click",l,false);g("userLogName").addEventListener("blur",e,false);g("loginSub").addEventListener("click",n,false)}function a(){var q='<div class="dialogDetail">        <div class="logTit">            <div class="titLeft">                <a onClick="closeDialog()" class="diaBtn" href="#">返回</a>            </div>            <div class="titRight"></div>            <div class="titMidd">注册</div>        </div>        <div class="logCont">            <div class="logInputs">                <div class="logTop">                         <ul>                        <li>                            <span>用户名</span>                            <input class="regInput" type="text" />                        </li>                        <li>                            <span>手机号</span>                            <input class="regInput" type="password" />                        </li>                    </ul>                </div>                <div class="clear h18"></div>                <div class="subBtm">                    <a href="#">立即找回</a>                </div>                <div class="clear h40"></div>            </div>            <div class="logNotice">                     <p>                手机号、身份证号、真实姓名是彩票兑奖的重要依据，为保障您的合法权益， 建议您注册时绑定，也可注册后到用户中心进行绑定操作                </p>            </div>        </div>    </div>';var r={width:545,height:356,isMask:true};b.dialog(q,r)}function c(){var q='<div class="dialogDetail">        <div class="logTit">            <div class="titLeft">                <a onClick="closeDialog()" class="diaBtn" href="#">返回</a>            </div>            <div class="titRight"></div>            <div class="titMidd">注册</div>        </div>        <div class="logCont">            <div class="logInputs">                <div class="logTop">                    <ul>                        <li>                            <span>用户名</span>                            <input id="userName" class="regInput" type="text" value="邮箱/用户名/手机号" />                        </li>                        <li>                            <span>密码</span>                            <input id="userPwd" class="regInput" type="password" />                        </li>                        <li>                            <span>确认密码</span>                            <input id="repassWord" class="regInput" type="password" />                        </li>                    </ul>                </div>                <div class="autoLog">                    <span class="logtext">绑定身份证</span>                    <div class="closeBtn">                        <span class="onoff" id="addIdCard"><label><i></i></label></span>                    </div>                </div>                <div class="logTop" id="idCard">                    <ul>                        <li>                            <span>真实姓名</span>                            <input id="trueName" class="regInput" type="text" />                        </li>                        <li>                            <span>身份证号</span>                            <input id="perNum" class="regInput" type="text" />                        </li>                    </ul>                </div>                <div id="errInfo" class="errInfo"></div>                <div class="clear h18"></div>                <div class="subBtm">                    <a id="reguest" href="#">注册</a>                </div>                <div class="userMssage">                    <img class="fl" src="images/icon/regMess.png">                    <span class="fl">阅读并同意</span>                    <a class="fl" href="#">《用户注册协议》</a>                </div>            </div>            <div class="logNotice">                <p>                手机号、身份证号、真实姓名是彩票兑奖的重要依据，为保障您的合法权益， 建议您注册时绑定，也可注册后到用户中心进行绑定操作                </p>            </div>        </div>    </div>';var r={width:545,height:530,isMask:true};b.dialog(q,r);g("addIdCard").addEventListener("click",i,false);g("reguest").addEventListener("click",f,false);g("userName").addEventListener("click",l,false);g("userName").addEventListener("blur",e,false);p()}function f(){var w=g("userName").value;var x=g("userPwd").value;var y=g("repassWord").value;var v=g("trueName").value;var t=g("perNum").value;var z=/^\w{1,15}(?:@(?!-))(?:(?:[a-z0-9-]*)(?:[a-z0-9](?!-))(?:\.(?!-)))+[a-z]{2,4}$/;var r=/^1[3|4|5|8][0-9]\d{4,8}$/;var s=/[^\u4e00-\u9fa5]/;var q=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/;var A=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{4}$/;if(!z.test(w)&&!r.test(w)){g("errInfo").innerHTML="请输入正确的账号信息，如邮箱，手机号码！";return}if(x.length<6){g("errInfo").innerHTML="密码不能少于6位";return}if(v.length>0){if(s.test(v)){g("errInfo").innerHTML="请您输入正确的中文姓名"}return}if(t.length>0){if(!q.test(t)&&!A.test(t)){g("errInfo").innerHTML="请输入正确的身份证号码！"}return}if(x!=y){g("errInfo").innerHTML="确认密码和输入密码不一致！";return}var u={command:"register",phonenum:w,password:x,certid:t,name:v,isBindPhone:0};b.getData(u,"regResult")}function n(){var s=g("userLogName").value;var q=g("userPwd").value;if(s==""||q.length==""){g("errInfo").style.display="block";g("errInfo").innerHTML="账号密码为空！";return}var r={command:"login",phonenum:s,password:q,isAutoLogin:0};b.getData(r,"logResult")}function i(){if(this.className=="onoff"){g("idCard").style.border="1px solid #CECECE";k.dom("idCard").style.height="89px";g("errInfo").style.padding="18px 0 0 10px"}else{g("idCard").style.border="0";g("idCard").style.height="0";g("errInfo").style.padding="0 0 0 10px"}}function h(){if(this.className=="onoff"){this.className="onoff onoff-on"}else{this.className="onoff"}}function d(q){console.log(q);if(reslt.errorCode=="0000"){j();return}g("errInfo").innerHTML=q.message}window.regResult=d;function m(q){console.log(q);if(q.error_code=="0000"){sessionStorage.setItem("sessionid",q.sessionid);sessionStorage.setItem("userno",q.userno);sessionStorage.setItem("userName",q.userName);g("dialog").style.display="none";g("logBtn").style.display="none";if(window.frash){window.location.reload()}return}g("errInfo").style.display="block";g("errInfo").innerHTML=q.message}window.logResult=m;function l(){if(this.value=="邮箱/用户名/手机号"){this.value=""}}function e(){if(this.value==""){this.value="邮箱/用户名/手机号"}}function g(q){return document.getElementById(q)||new Object}})();